\input{common/tex/header}
\input{../listings/clips.tex}
\input{../listings/json.tex}
\input{../listings/pddl.tex}

\usepackage{todonotes}
\usepackage{booktabs}
\newcommand{\tabitem}{~~\llap{\textcolor{FawkesOrange}{\textbullet}}~~}


\hypersetup{
  pdftitle      = {Robot Memory-Master Thesis Presentation},
  pdfauthor     = {Frederik Zwilling},
  pdfkeywords   = {robotics, artificial intelligence, robot memory, logistics, RCLL, @Home},
  pdfsubject    = {Master Thesis Presentation}
  %hidelinks    = true
}

\title[Robot Memory] {A Document-Oriented Robot Memory\\ for
  Knowledge Sharing and Hybrid Reasoning\\ on Mobile Robots}
\author[Zwilling]{
  \textbf{Frederik Zwilling}\\
  ~Supervisors: Prof. Lakemeyer, PhD., Prof. Dr. Jarke\\
  ~Adviser: Tim Niemueller
}
\def\projecturl{}

\date[Mar 15th 2017]{Mar 15th 2017 -- Master Thesis Presentation}

\begin{document}
\shorthandoff{"} % aus "o kein รถ machen

\frame[plain]{\titlepage}
\addtocounter{framenumber}{-1}

\begin{frame}[plain]
  \frametitle{Robot Memory at a Glance}
  \textbf{\large Database to store information of a robot about its environment}
  \bigskip
  \begin{itemize}
  \item \textbf{Domain:} Logistics and domestic service robots
  \item \textbf{Purpose:} Scalable storage and rich querying
  \item \textbf{Focus:} Knowledge sharing and hybrid reasoning\\ for knowledge-based systems
  \end{itemize}
\end{frame}

\addtocounter{framenumber}{-1}

\section{Motivation}
\begin{frame}
  \tableofcontents[currentsection]
\end{frame}

\begin{frame}
  \frametitle{Why do robots need a memory?}
  \vspace{1cm}
  \begin{columns}
    \begin{column}{0.5\textwidth}
    \includegraphics[width=\textwidth]{../thesis/img/rcll-feld}
    \begin{itemize}
    \item Store and reason about world state
    \item Share information in multi-robot system
    \end{itemize}
%% share knowledge to collaborate
    \end{column}
    \begin{column}{0.5\textwidth}
    \includegraphics[width=\textwidth]{../thesis/img/pr2-kbsg-kitchen}
    \begin{itemize}
    \item Remember object sights
    \item Persistent storage
    \item Consistent information base for different components
    \end{itemize}
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}
  \frametitle{Robot Memory Goals}
  \begin{itemize}
  \item Flexible storage and retrieval % generic
  \item Spatio-temporal grounding
  \item Persistent storage
  \bigskip
  \item Memory sharing between knowledge-based systems
  %\item Special views for different components
  \item Distributed memory for multi-robot systems
  \bigskip
  \item Computation on demand (\emph{Computables})
  \item Notification about updates (\emph{Triggers})
  %\item Human interface and visualization
  \end{itemize}
\end{frame}


\section{Background}
\begin{frame}
  \tableofcontents[currentsection]
\end{frame}

\begin{frame}
  \frametitle{Application Domains}
  \begin{columns}
    \begin{column}{0.5\textwidth}
      \centering
      \includegraphics[width=0.7\textwidth]{../thesis/img/rcll-feld}
  \begin{description}[]
  \item[RoboCup Logistics League] \hfill \\
    \begin{itemize}
    \item Production logistics\\ in smart factory
    \item Share world model
    \begin{itemize}
    \item between robots
    \item between global planner and reasoner executive
    \end{itemize}
    \end{itemize}
  \end{description}
    \end{column}
    \begin{column}{0.5\textwidth}
    \centering
    \includegraphics[width=0.7\textwidth]{../thesis/img/pr2-kbsg-kitchen}
  \begin{description}[]
  \item[RoboCup@Home] \hfill \\
    \begin{itemize}
    \item Domestic service robots
    \item Collect knowledge about concrete environment
    \item Hybrid reasoning with spatio-temporal knowledge
    \item Persistent storage
    \end{itemize}
  \end{description}    
    \end{column}
  \end{columns}
%TODO: already intorduce evaluation scenario here?
  \end{frame}

\begin{frame}
  \frametitle{Planners and Reasoners in Fawkes}
  \begin{columns}
  \begin{column}{0.83\linewidth}
  \begin{description}[]
  \item[CLIPS Rules Engine] \hfill \\
  \begin{itemize}
  \item First-Order Logic forward chaining system
  \item Fact base and condition-action rules
  \item[$\Rightarrow$] Used for world model reasoning and\\ execution monitoring
  \end{itemize}
  \item[Planning Domain Definition Language (PDDL)]%<uncover@2->
    \hfill \\
  \begin{itemize}
  \item Standardized language for planning problems
  \item Find action sequence through heuristic search
  \item[$\Rightarrow$] Used for finding global plans
  \end{itemize}
  \item[Motion Planners]%<uncover@3->
    \hfill \\
  \begin{itemize}
  \item Robot arm and locomotion collision avoidance
  \item Depend on geometric data
  \end{itemize}
  \end{description}
  \end{column}
  \begin{column}{0.17\linewidth}
  \includegraphics[width=\textwidth]{../thesis/img/CLIPS}
  \vspace{3.4cm}
  %\pause\pause
  \includegraphics[width=\textwidth]{../thesis/img/openrave}
  \end{column}
  \end{columns}
\end{frame}

\section{Related Work}
\begin{frame}
  \tableofcontents[currentsection]
\end{frame}
\begin{frame}
  \frametitle{Robot Information Storage Systems}
  \begin{description}[]
  \item[KnowRob~\cite{KnowRob}]%<uncover@1->
    \hfill \\
    \begin{itemize}
    \item Common sense reasoning with ontologies
          %explain with example (graph, rdf, milk)
    \item Virtual knowledge base to interface perception
    \item Based on Prolog
    \end{itemize}
  \end{description}
  \begin{description}[]
  \item[OpenRobots Ontology~\cite{Oro}]%<uncover@2-> 
    \hfill \\
    \begin{itemize}
    \item Common sense reasoning with ontologies
    \item Events notifying about changes
    \item Based on  Java
    \end{itemize}
  \end{description}
  \begin{block}{}%<uncover@3->
  \begin{itemize}
  \item Not applicable for multi-robot systems
  \item Scalability, efficiency concerns % because storage is interwined with reasoning
  \item Missing events / computation on demand
  \end{itemize}
  \end{block}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Document Orientation}
  \begin{itemize}
  \item Documents: Sets of key-value pairs
    %keys unique, different value types
  \item Java Script Object Notation (JSON)
    \begin{lstlisting}[style=SmallJSON,linewidth=8.5cm,
      label=lst:json,
      framexleftmargin=1pt, xleftmargin=0pt,
      morekeywords={}, numbers=none]
      {
        "key": "value",
        "subdocument": {"x":3, "y":1},
        "array": [{"n":0.1},{"n":2}]
      }
    \end{lstlisting}
  \item Denormalized (information bundled in documents)
  \item Schema free
  \end{itemize}
  \begin{itemize}
  \item[$\Rightarrow$] Allows generic, flexible, and distributable robot memory
  \end{itemize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{MongoDB Database System}
  \hfill\includegraphics[width=0.3\textwidth]{../thesis/img/mongodb}
  \begin{itemize}
    \item Scalable and widely used
    \item Query language with aggregation, MapReduce, JavaScript % powerful query features
\begin{lstlisting}[style=SmallJSON,linewidth=8.5cm,
  framexleftmargin=2pt, xleftmargin=10pt,
 morekeywords={}, numbers=none]
db.environment.find(
  { object: "cup", color: {$ne: "red"}})
\end{lstlisting}%$
    \item Collections group documents
    \item Indexing for fast querying
    \item Distributable with Replica Sets\\ %explain a bit (Primary, Secondary)
      Operations Log (Oplog) to forward changes
    \item Comparable good performance and scalability\\\cite{arango-vs-mongo,db-comparison}
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Related Work with MongoDB}
  \begin{description}
  \item[Robot Database with MongoDB~\cite{RoboDB}]%<uncover@1->
                \hfill \\
    \begin{itemize}
    \item Data logging for evaluation and fault analysis
    \item Generic and scalable storage with MongoDB
    \item Integration in Fawkes and ROS
    \end{itemize}
\bigskip
  \item[Extensions of  MongoDB]%<uncover@2->
                \hfill \\
    \begin{itemize}
    \item Triggers with replication Oplog~\cite{mongodb-trigger}
    %\item Multi-Master Replication~\cite{mongodb-multi-master}
    \end{itemize}
  \end{description}
\end{frame}


\section{Approach}
\begin{frame}
  \tableofcontents[currentsection]
\end{frame}
\begin{frame}
  \frametitle{Terminology}
  \begin{description}
  \item[Documents] \hfill {\small $\{("object","cup"),("position",{\scriptstyle\{("x",8),("y",4)\}})\}$}\\
    \begin{itemize}
    \item Sets of key-value pairs (unique keys)
    \item Finitely nested sub-documents
    \end{itemize}
\bigskip
  \item[Robot Memory] \hfill \\
    \begin{itemize}
    \item Composed of database and computables
    \item Database: Set of documents
    \item Computables: Functions yielding sets of documents
    \end{itemize}
  \end{description}  
\end{frame}

\begin{frame}[fragile]
  \frametitle{Computables}
  \begin{description}
  \item[Advantages of on demand computation]%<uncover@1->
                \hfill \\
    \begin{itemize}
    \item Interfacing of perception and complex computation in KBS % to bypass expressiveness/complexity
    \item Decreased computational effort % compared to continously store %e.g. perception, transform, distance
    \item Simplify hybrid reasoning by transforming between\\ spatio-temporal and symbolic information
    \end{itemize}
  \item[Computables]%<uncover@2->
                \hfill \\
    \begin{itemize}
    \item Function: Query $x$ Robot-State $\rightarrow$ Set of documents
    \item Computable specification
    \item Priority % to order evaluation because of dependencies between computables
    \end{itemize}
  \end{description}

\begin{minipage}[b]{.27\textwidth}
\begin{lstlisting}[style=ReallySmallJSON,
  framexleftmargin=5pt, xleftmargin=0pt,
 morekeywords={}, numbers=none]
{
  compute: "sum",
  x: {$exists:true},
  y: {$exists:true}
}
\end{lstlisting}
Computable\\specification
\end{minipage}%
\hfill
\begin{minipage}[b]{.25\textwidth}
\begin{lstlisting}[style=ReallySmallJSON,
  framexleftmargin=5pt, xleftmargin=0pt,
 morekeywords={}, numbers=none]
{
  compute: "sum",
  x: 15,
  y: 4
}
\end{lstlisting}
Query requiring the computable
\end{minipage}%
\hfill
\begin{minipage}[b]{.25\textwidth}
\begin{lstlisting}[style=ReallySmallJSON,
  framexleftmargin=5pt, xleftmargin=0pt,
 morekeywords={}, numbers=none]
{
  compute: "sum",
  x: 15,
  y: 4,
  sum: 19
}
\end{lstlisting}
  \vspace{-0.1cm}
Resulting document
\end{minipage}%
\end{frame}

\begin{frame}
  \frametitle{Triggers}
  \begin{description}
  \item[Trigger: Notification about events in the robot memory]%<uncover@1->
                \hfill \\
    \begin{itemize}
    \item Queries define changes of single documents, e.g., \texttt{\{relation: "order"\}}
    \item Callback with matching document, timestamp, and operation type
    \item Avoids polling
    \item Use cases: World model updates, Messaging % e.g. multi-robot system, new plan
    \end{itemize}
  \item[Implementation]%<uncover@2->
                \hfill \\
    \begin{itemize}
    \item Searching replication Oplog for changes
    \item Tailable cursor in capped collection % give intuition ring buffer
    \end{itemize}
  \end{description}
\end{frame}

\begin{frame}
  \frametitle{Architecture}
  \center
  \includegraphics[width=0.8\textwidth]{../thesis/architecture.pdf}
\end{frame}


\section{Implementation}
\begin{frame}
  \tableofcontents[currentsection]
\end{frame}

\begin{frame}
  \frametitle{Back-End}
  \begin{description}
  \item[MongoDB as basis]%<uncover@1->
                \hfill \\
    \begin{itemize}
    \item Document-oriented storage
    \item Basic operations (insert, query, update, remove)
    \end{itemize}
  \item[Distribution in multi-robot system]%<uncover@2->
                \hfill \\
    \begin{itemize}
    \item Private and shared database
    \item Write operations only on primary instance
    \item Eventual consistency on secondaries %(forwarding changes, denormalization)
    %\item No sharding because WiFi, one robot in breakdown
    \end{itemize}
  \end{description}
\end{frame}

\begin{frame}
  \frametitle{Robot Memory}
  \begin{description}
  \item[Operation Manager]%<uncover@1->
                \hfill \\
    \begin{itemize}
    \item Also use MongoDB query language
    \item Modify documents/queries, e.g., to add meta information % decay time, persistency
    \item Automated start-up and configuration of MongoDB % as sub process
    \end{itemize}
  \end{description}
\end{frame}

% how to interface robot memory from planners and reasoners
% and how to map documents into specific concepts

\begin{frame}[fragile]
  \frametitle{CLIPS Interface}
  \begin{description}
  \item[CLIPS Characteristics]%<uncover@1->
                \hfill \\
    \begin{itemize}
    \item Fact base as working memory
  \begin{lstlisting}[showlines,style=ReallySmallCLIPS,
  framexleftmargin=4pt, xleftmargin=0pt,
  emph={skill, args, state, target, res},
  emphstyle=\bfseries\color{green!80!black},
  emph={[2]\?skill, \$\?args, cap-station, \?target, use,
  WAIT-FOR-LOCK, SKILL-EXECUTION, running},
  emphstyle={[2]\bfseries\color{blue!80!black}},
  morekeywords={retract, assert, modify, skill-call, skill-to-execute,
    wait-for-lock},
  numbers=none]
(cap-station (name M-CS1) (loaded NONE) (caps-on-shelf 3))
\end{lstlisting} %$ This is just to fix Emacs highlighting due to dollar sign in code above
    \item Condition-action rules
    \item Procedural functions
    \end{itemize}
  \item[Robot Memory Interface]%<uncover@2->
                \hfill \\
    \begin{itemize}
    \item Provide operation and traversal functions in CLIPS % insert, query, update, get-key, construct document
    \item Mapping between facts and documents
\begin{lstlisting}[style=SmallJSON,
  framexleftmargin=0pt, xleftmargin=0pt,
 morekeywords={}, numbers=none]
 { relation: "cap-station", name: "M-CS1",
   loaded: "NONE", caps-on-shelf: NumberLong(3)}
\end{lstlisting}
    \item Assert trigger events as facts
    \end{itemize}
  \end{description}
\end{frame}

\begin{frame}[fragile]
  \frametitle{PDDL Interface}
  \begin{description}
  \item[PDDL Characteristics]%<uncover@1->
                \hfill \\
    \begin{itemize}
    \item Domain definition and problem description as input %for PDDL-based planner
    \item Predicates represent information
\begin{lstlisting}[style=SmallSlidePDDL,
  framexleftmargin=1pt, xleftmargin=1pt,linewidth=9.5cm,
 morekeywords={}, numbers=none]
  (:goal (on A B))
  (:init (on-table A) (on-table B))
\end{lstlisting}
    \end{itemize}
  \item[Robot Memory Interface]%<uncover@2->
                \hfill \\
    \begin{itemize}
    \item Mapping of documents to predicates
    \item Generation of problem description from template
\begin{lstlisting}[style=SmallSlidePDDL,
  framexleftmargin=1pt, xleftmargin=1pt,linewidth=9.5cm,
 morekeywords={}, numbers=none]
  (:goal <<GOAL>>)
  (:init  <<#ONTABLE|{relation:'on-table'}>>
            (on-table <<object>>) <</ONTABLE>>))
\end{lstlisting}
\begin{lstlisting}[style=SmallJSON,
  framexleftmargin=0pt, xleftmargin=0pt,linewidth=9.5cm,
 morekeywords={}, numbers=none]
 { relation: "on-table", object: "A"},
 { relation: "on-table", object: "B"}
\end{lstlisting}
    \item Parses resulting plans and inserts them as documents % used Fast Forward in thesis
    \end{itemize}
  \end{description}
\end{frame}

\begin{frame}[fragile]
  \frametitle{OpenRAVE Interface}
  \begin{columns}
    \begin{column}{0.6\textwidth}
  \begin{description}
  \item[OpenRAVE Characteristics]%<uncover@1->
                \hfill \\
    \begin{itemize}
    \item Geometric motion planner
    \item Operates in continous space
    \end{itemize}
  \item[Robot Memory Interface]%<uncover@2->
                \hfill \\
    \begin{itemize}
    \item Updates planner scene\\ based on positions\\ represented in documents
\begin{lstlisting}[style=SmallJSON,
  framexleftmargin=5pt, xleftmargin=0pt,linewidth=5cm,
 morekeywords={}, numbers=none]
{
  block: "B",
  frame: "map",
  translation:
    [0.43, -0.04, 0.01]
}
\end{lstlisting}
    %\item Configurable models and queries
    \end{itemize}
  \end{description}
    \end{column}
    \begin{column}{0.4\textwidth}
    \includegraphics[width=\textwidth]{../thesis/img/openrave-blocks}
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}
  \frametitle{Application and evaluation scenarios}
  \begin{columns}
    \begin{column}{0.5\textwidth}
    \textbf{World model synchronization between robots in the RCLL}\\
    \vspace{0.6cm}
    \includegraphics[width=0.9\textwidth]{../thesis/img/rcll-sim-slim}
%% share knowledge to collaborate
    \end{column}
    \begin{column}{0.4\textwidth}
    \textbf{Blocks world with a robot arm}\\
    \vspace{0.6cm}
    \includegraphics[width=\textwidth]{../thesis/img/blocks-world-annotated}
    \end{column}
  \end{columns}
\end{frame}


\section{Evaluation}
\begin{frame}
  \tableofcontents[currentsection]
\end{frame}

\begin{frame}
  \frametitle{Qualitative Evaluation}
  \begin{description}
  \item[Experience from evaluation scenarios]%<uncover@1->
                \hfill \\
    \begin{itemize}
    \item Flexible storage and expressive querying
    \item Convenient memory sharing between KBS and in distributed system
    \item Planner specific views on a common and thus consistent information basis
      % (geometric for motion planner, symbolic for pddl)
    \item Simplification of hybrid reasoning with computables
      % Transformation of geometric block position to on-table predicate
    \item Triggers useful for worldmodel updates and messages
    \end{itemize}
  \item[Expressiveness vs. Computational Complexity]%<uncover@2->
                \hfill \\
    \begin{itemize}
    \item Trigger only for changes of single documents %(ok because of denormalization)
    \item No direct trigger evaluation for computables % mention complexity, posisble with workaround
    \end{itemize}
  \end{description}

\begin{block}{}%<uncover@3->
  \begin{itemize}
  \item Beneficial for AI/robot software development
  \item Especially for combining different planners/reasoners
  \end{itemize}
  \end{block}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Quantitative Evaluation}
  \begin{columns}
    \begin{column}{0.55\textwidth}
      \begin{description}
      \item[Tidy up scenario] \hfill \\
        \begin{itemize}
        \item Robot Memory with information about objects
          \begin{lstlisting}[style=SmallJSON,
            framexleftmargin=5pt, xleftmargin=0pt,
            morekeywords={}, numbers=none]
{ name: "coffee machine",
  position: "counter",
  tidied: "counter" },
{ name: "milk",
  position: "counter",
  tidied: "fridge" }
          \end{lstlisting}
        \item Measure operation durations with increasing domain size
        \item With / without indexing
        \end{itemize}
      \end{description}
    \end{column}
    \begin{column}{0.45\textwidth}
      \centering
    \includegraphics[width=0.9\textwidth]{../thesis/img/tidy-up}\\
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}
  \frametitle{Duration of Robot Memory Operations I}
  \centering
  \begin{columns}
    \begin{column}{0.55\textwidth}
  \centering
    \small
    \\\vspace{-0.15cm}
    \includegraphics[width=\textwidth]{../thesis/plots/insert-durations}\\
    \\\vspace{-0.05cm}
    Insertions
    \\\vspace{-0.05cm}
    \includegraphics[width=\textwidth]{../thesis/plots/query-durations}\\
    \\\vspace{-0.08cm}
    Queries
    \end{column}
    \begin{column}{0.55\textwidth}
  \centering
    \small
    \\\vspace{-0.15cm}
    \includegraphics[width=\textwidth]{../thesis/plots/insert-durations-index}\\
    \\\vspace{-0.05cm}
    Insertions with Indexing
    \\\vspace{-0.08cm}
    \includegraphics[width=\textwidth]{../thesis/plots/query-durations-index}\\
    \\\vspace{-0.05cm}
    Queries with Indexing
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}
  \frametitle{Duration of Robot Memory Operations II}
  \centering
  \begin{columns}
    \begin{column}{0.55\textwidth}
  \centering
    \small
    \\\vspace{-0.17cm}
    \includegraphics[width=\textwidth]{../thesis/plots/update-durations}\\
    \\\vspace{-0.08cm}
    Updates
    \\\vspace{-0.05cm}
    \includegraphics[width=\textwidth]{../thesis/plots/computable-durations}\\
    \\\vspace{-0.05cm}
    Computables
    \end{column}
    \begin{column}{0.55\textwidth}
  \centering
    \small
    \\\vspace{-0.17cm}
    \includegraphics[width=\textwidth]{../thesis/plots/update-durations-index}\\
    \\\vspace{-0.08cm}
    Updates with Indexes
    \\\vspace{-0.05cm}
    \includegraphics[width=\textwidth]{../thesis/plots/computable-durations-index}\\
    \\\vspace{-0.05cm}
    Computables with Indexes
    \end{column}
  \end{columns}
\end{frame}


\section{Conclusion}
\begin{frame}
  \tableofcontents[currentsection]
\end{frame}

\begin{frame}
  \frametitle{Foundation for Future Projects}
  \begin{description}
  \item[Two projects currently using the Robot Memory]\hfill\\
    \begin{itemize}
    \item Both for centralized global task planning in the RCLL
    \item Reactive ASP and real-time constraints
    \item PDDL with temporal aspects
    \end{itemize}
  \item[Beneficial features] \hfill \\
    \begin{itemize}
    \item Distributed memory shared by planner and executives
    \item CLIPS agent integration
    \item Triggers for notifications
    \item PDDL problem definition generation
    \end{itemize}
  \end{description}
\end{frame}

\begin{frame}
  \frametitle{Conclusion and Questions}
  \begin{block}{Generic Robot Memory } \centering\bfseries
    flexible storage and expressive querying for hybrid reasoning and world model sharing between different KBS
  \end{block}
  \bigskip
  \begin{columns}
    \begin{column}{0.5\textwidth}
      \begin{itemize}
      \item Document-oriented representation and querying
      \item Distributable and persistent
      \item Theoretical foundation
      \item Triggers for notification
      % \item Architectural design
      % \item Interfaces for KBS
      %\item Hybrid reasoning with computables
      \end{itemize}
    \end{column}
    \begin{column}{0.5\textwidth}
      \begin{itemize}
      \item Computables
      \item Symbolic/spatio-temporal
      \item Beneficial and efficient in application scenarios
      \item Foundation for future projects
      \end{itemize}
    \end{column}
  \end{columns}
\end{frame}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcounter{finalframe}
\setcounter{finalframe}{\value{framenumber}}


\begin{frame}[allowframebreaks]
  \frametitle{References}
  \small
  \bibliographystyle{apalike}
  \bibliography{../references}
\end{frame}

% Backup Slides

\begin{frame}
  \frametitle{Theoretical Foundation}
\begin{description}[]
  \item[Definition of documents representing knowledge] \hfill \\
  \small e.g.~$\{("object","cup"),("room","kitchen"),("position",{\scriptstyle\{("x",8),("y",4)\}})\}$
  \begin{enumerate}
\item \textbf{Keys:} $\mathcal{K} := \Sigma^*$
\item  \textbf{Atomic values:} $\mathcal{V}_0$ are constants
\item \textbf{Unnested key-value pairs:} $\mathcal{P}_0:=\mathcal{K}\times\mathcal{V}_0$
\item \textbf{Unnested documents:} \vspace{-0.3cm}
%are sets of key-value pairs with unique keys and thus included in the power set of $\mathcal{P}_0$:\\
\begin{align*}
\mathcal{D}_0:=\{
  d\in\mathbb{P}(\mathcal{P}_0)|
  \forall (k,v),(k',v')\in d , k\neq k' \vee (k,v)=(k',v')
  \}
\end{align*}
\end{enumerate}
  \item[With nesting] \hfill \\
  \begin{enumerate}
\item  \textbf{Values:} $\mathcal{V}_n := \mathcal{V}_{n-1} \cup \mathcal{D}_{n-1}$
\item \textbf{Key-Value Pairs:} $\mathcal{P}_n:=\mathcal{K}\times\mathcal{V}_n$
\item \textbf{Documents:} \vspace{-0.3cm}
\begin{align*}
  \mathcal{D}_n:=\{
  d\in\mathbb{P}(\mathcal{P}_n)|
  \forall (k,v),(k',v')\in d , k\neq k' \vee (k,v)=(k',v')
  \}
\end{align*}
\end{enumerate}
  \end{description}
  \textbf{Finitely nested documents:} $\mathcal{D}=\cup_{n\in\mathbb{N}}\mathcal{D}_n$\\
  \textbf{Values:} $\mathcal{V}=\cup_{n\in\mathbb{N}}\mathcal{V}_n$
\end{frame}

\begin{frame}
  \frametitle{Theoretical Foundation}
  \begin{description}[]
  \item[Definition Robot Memory] \hfill \\
    \begin{enumerate}
      \item \textbf{Database:} finite set $\mathcal{DB} \subset \mathcal{D}$
      \item \textbf{Query:} represented by document $q\in\mathcal{D}$\\
      yields set of documents $r\subset\mathcal{DB}$ as result\\
      e.g. $q=\{("object","cup"),("room","kitchen")\}$
      \item \textbf{Computable:} $f: \mathcal{D} \rightarrow \mathbb{P}(\mathcal{D})$
      % providing computable knowledge on demand
      %computability and termination ensured by providing component
      \item \textbf{Set of Computables:} $\mathcal{C}$
      \item \textbf{Robot Memory:} $\mathcal{RM}=(\mathcal{DB},\mathcal{C})$
      \item \textbf{Memorized Documents:} $mem(\mathcal{RM})=\mathcal{DB} \cup \bigcup_{f\in\mathcal{C}}f(\mathcal{D})$
    \end{enumerate}
  \end{description}  
\end{frame}

\begin{frame}
  \frametitle{Theoretical Foundation}
    \begin{description}[]
  \item[Mapping into PDDL] \hfill \\
\vspace{-0.5cm}
\small\begin{align*}
\text{e.g. } map_p&(\{("predicate", "at"),("object", "cup"),("room","kitchen")\})\\
             &= at(map_f("cup"), map_f("kitchen")) = at(cup, kitchen) \text{.}
\end{align*}
  \begin{enumerate}
      \item \textbf{Predicate symbols} $\mathcal{R}$, \textbf{Function symbols} $\mathcal{F}$
      \item \textbf{Name mapping:}
      \begin{align*}
        name_{pred}: \mathcal{R} \rightarrow \Sigma^* &\text{ and } name_{func}: \mathcal{F} \rightarrow \Sigma^*\\
        %injective, disjunct
        name_{pred-atr}: \mathcal{R} \times \mathbb{N} \rightarrow \mathcal{K} &\text{ and } name_{func-atr}: \mathcal{F} \times \mathbb{N} \rightarrow
\mathcal{K}
      \end{align*}
      \only<1>{
      \item \textbf{Map to predicate:}
      \begin{align*}
        map_p(d)=&\text{ }p(map_f(v_1), ..., map_f(v_n)), \text{ iff } p \text{ is a n-array predicate in } \mathcal{R},\\
  ("predica&te", name_{pred}(p))\in d, \forall i \in \{1..n\} (name_{pred-atr}(p,i), v_i)\in d\\
  map_p(d)=& \text{ }nil_p, otherwise
      \end{align*}}
      \only<2>{
      \item \textbf{Map to predicate}
      \item \textbf{Map to function term:}
      \begin{align*}
        map_f(v)= &\text{ }v, v \in \mathcal{V}_0\\
        map_f(d)= &\text{ }f(map_f(v_1), ..., map_f(v_n)), \text{ iff } f \text{ is a n-array function in } \mathcal{F},\\
  ("functio&n", name_{func}(f))\in d, \forall i \in \{1..n\} (name_{func-atr}(f,i), v_i)\in d\\
  map_f(d)= &\text{ } nil_f, otherwise
      \end{align*}}
    \end{enumerate}
  \end{description}
\end{frame}
\begin{frame}[fragile]
  \frametitle{Trigger/Oplog document}
\begin{lstlisting}[style=SmallJSON,
  label=lst:Oplog,
  framexleftmargin=2pt, xleftmargin=0pt,
 morekeywords={}, numbers=none]
{
  ns: "syncedrobmem.clipswm",
  ts: Timestamp(1485369072, 5),
  op: "i",
  o: {
    _id : ObjectId("58c14a14"),
    relation: "order",
    id: 2,
    complexity: "C0",
    delivery-gate: 3,
    quantity-requested: 1,
    quantity-delivered: 0,
    begin: 209,
    end: 282 }
}
\end{lstlisting}
\end{frame}


\begin{frame}
  \frametitle{Evaluation: Duration without Indexing}
  \centering
  \begin{columns}
    \begin{column}{0.55\textwidth}
  \centering
    \small
    \\\vspace{-0.15cm}
    \includegraphics[width=\textwidth]{../thesis/plots/insert-durations}\\
    \\\vspace{-0.05cm}
    (a) Insertions
    \\\vspace{-0.1cm}
    \includegraphics[width=\textwidth]{../thesis/plots/update-durations}\\
    \\\vspace{-0.05cm}
    (c) Updates
    \end{column}
    \begin{column}{0.55\textwidth}
  \centering
    \small
    \\\vspace{-0.15cm}
    \includegraphics[width=\textwidth]{../thesis/plots/query-durations}\\
    \\\vspace{-0.05cm}
    (b) Queries
    \\\vspace{-0.1cm}
    \includegraphics[width=\textwidth]{../thesis/plots/computable-durations}\\
    \\\vspace{-0.05cm}
    (d) Computables
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}
  \frametitle{Evaluation: Durations with Indexing}
  \centering
  \begin{columns}
    \begin{column}{0.55\textwidth}
  \centering
    \small
    \\\vspace{-0.15cm}
    \includegraphics[width=\textwidth]{../thesis/plots/insert-durations-index}\\
    \\\vspace{-0.05cm}
    (a) Insertions
    \\\vspace{-0.1cm}
    \includegraphics[width=\textwidth]{../thesis/plots/update-durations-index}\\
    \\\vspace{-0.05cm}
    (c) Updates
    \end{column}
    \begin{column}{0.55\textwidth}
  \centering
    \small
    \\\vspace{-0.15cm}
    \includegraphics[width=\textwidth]{../thesis/plots/query-durations-index}\\
    \\\vspace{-0.05cm}
    (b) Queries
    \\\vspace{-0.1cm}
    \includegraphics[width=\textwidth]{../thesis/plots/computable-durations-index}\\
    \\\vspace{-0.05cm}
    (d) Computables
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}
  \frametitle{Evaluation: Benchmarks RCLL}
  \centering
  \includegraphics[width=0.8\textwidth]{../thesis/plots/rcll-local/cpu-mem}\\
  \vspace{0.1cm}
  \includegraphics[width=0.8\textwidth]{../thesis/plots/rcll-local/operations}\\
  \vspace{0.1cm}
  \includegraphics[width=0.8\textwidth]{../thesis/plots/rsnetwork}
\end{frame}

\begin{frame}
  \frametitle{Evaluation: Benchmarks Blocks World}
  \centering
  \includegraphics[width=0.8\textwidth]{../thesis/plots/blocksworld/cpu-mem}\\
  \vspace{0.1cm}
  \includegraphics[width=0.8\textwidth]{../thesis/plots/blocksworld/operations}
\end{frame}

\begin{frame}
  \frametitle{Fawkes}
  \includegraphics[width=0.25\textwidth]{../thesis/img/fawkes}  
  \bigskip
  \begin{itemize}
    \item Robot Software Framework % used in application domains
    \item Component-based software design % RM one of those components
    \item Hybrid blackboard communication infrastructure\\ with specific interfaces/messages % but no generic memory
      \skip
    \item[$\Rightarrow$] Robot Memory available as Fawkes plugin
  \end{itemize}
\end{frame}

\setcounter{framenumber}{\value{finalframe}}

\end{document}
